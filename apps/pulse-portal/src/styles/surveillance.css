/* apps/pulse-portal/src/styles/surveillance.css
   PULSE — Surveillance page styles (theme variables live in theme.css)
   Goal: professional, stable layout (RTL/LTR) + prevent chart/grid overflow.
   NOTE: We avoid defining :root here.
*/

/* ---------------------------------------------------------
   Page background
   --------------------------------------------------------- */

.dash{
  background:
    radial-gradient(circle at top left, rgba(56,189,248,.25), transparent 55%),
    radial-gradient(circle at top right, rgba(37,99,235,.16), transparent 55%),
    linear-gradient(180deg, var(--bg0), var(--bg2));
  color: var(--text);
}

/* ---------------------------------------------------------
   Surfaces
   --------------------------------------------------------- */

.panel,
.card,
.statusCard,
.infoCard,
.mini,
.stratCard,
.reportBox2{
  background: var(--card);
  border: 1px solid var(--stroke2);
  box-shadow: var(--shadow2);
  color: var(--text);
  min-width: 0;
}

.muted,
.panelHint,
.panelSub{
  color: var(--muted);
}

/* Inputs */
.field input,
.ddBtn{
  background: rgba(255,255,255,.95);
  border: 1px solid var(--stroke2);
  color: var(--text);
}

.field select option{
  background: #ffffff;
  color: #0f172a;
}

/* Buttons */
.ghostBtn{
  background: rgba(15,23,42,.04);
  border: 1px solid var(--stroke2);
  color: var(--text);
}

.primaryBtn{
  background: linear-gradient(135deg, rgba(37,99,235,.16), rgba(56,189,248,.14));
  border: 1px solid rgba(37,99,235,.35);
  color: var(--textHi);
}

/* Pills */
.tinyPill{
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 8px 12px;
  border-radius: 999px;
  font-weight: 900;
  line-height: 1;
  white-space: nowrap;

  background: rgba(15,23,42,.04);
  border: 1px solid var(--stroke2);
  color: var(--text);
}

/* ---------------------------------------------------------
   Professional page structure
   --------------------------------------------------------- */

.surveillancePage{
  max-width: 1240px;
  margin: 0 auto;
  padding: 0;
  display: flex;
  flex-direction: column;
  gap: 16px;
  min-width: 0;
}

.statusSection{
  display: grid;
  grid-template-columns: 1fr;
  gap: 14px;
  min-width: 0;
}

.sectionStack{
  display: flex;
  flex-direction: column;
  gap: 12px;
  min-width: 0;
}

.fullWidth{ grid-column: 1 / -1; }

.panel, .card, .statusCard, .infoCard{ margin: 0; }

/* ---------------------------------------------------------
   Status Card — the "hero" of results
   --------------------------------------------------------- */

.statusCard{
  position: relative;
  padding: 16px;
  border-radius: 18px;
  overflow: hidden;
}

.statusGlow{
  position: absolute;
  inset: 0;
  pointer-events: none;
}

.statusTop{
  position: relative;
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap: 12px;
  flex-wrap: wrap;
  min-width: 0;
}

.statusTitle{
  font-size: 16px;
  font-weight: 950;
  color: var(--textHi);
  letter-spacing: .2px;
}

.statusBadge{
  position: relative;
  display: inline-flex;
  align-items: center;
  gap: 10px;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid var(--stroke2);
  background: rgba(255,255,255,.72);
  backdrop-filter: blur(8px);
  box-shadow: 0 10px 26px rgba(15,23,42,.06);
  color: var(--textHi);
  min-width: 0;
}

.statusMain{
  position: relative;
  display:grid;
  grid-template-columns: 1.2fr 1fr;
  gap: 14px;
  align-items:start;
  margin-top: 12px;
  min-width: 0;
}

@media (max-width: 980px){
  .statusMain{ grid-template-columns: 1fr; }
}

.statusBig{
  font-size: 34px;
  font-weight: 950;
  line-height: 1.05;
  letter-spacing: .2px;
}

.statusMeta{
  border-radius: 16px;
  border: 1px solid rgba(15,23,42,.08);
  background: rgba(255,255,255,.62);
  backdrop-filter: blur(8px);
  padding: 10px 12px;
  min-width: 0;
}

/* Key-value rows */
.kv{
  display:flex;
  justify-content:space-between;
  align-items:baseline;
  gap: 10px;
  flex-wrap: wrap;
  padding: 8px 0;
  border-bottom: 1px dashed rgba(15,23,42,.10);
  min-width: 0;
}
.kv:last-child{ border-bottom: 0; }

.k{
  flex: 1 1 auto;
  min-width: 140px;
  color: rgba(15,23,42,.70);
  font-weight: 800;
}

.v{
  flex: 0 0 auto;
  white-space: nowrap;
  color: var(--textHi);
  font-weight: 900;
}

.statusText{
  position: relative;
  margin-top: 12px;
  padding-top: 12px;
  border-top: 1px solid rgba(15,23,42,.10);
  overflow-wrap: anywhere;
  word-break: break-word;
}

.statusActions{
  display:flex;
  gap: 10px;
  align-items:center;
  justify-content:flex-start;
  flex-wrap: wrap;
  margin-top: 12px;
}

@media (max-width: 640px){
  .statusActions .primaryBtn,
  .statusActions .linkBtn{
    width: 100%;
  }
}

/* ---------------------------------------------------------
   Mini blocks (dataset / range / updated)
   --------------------------------------------------------- */

.mini{
  border-radius: 18px;
  padding: 12px;
  min-width: 0;
}

.miniGrid{
  display:grid;
  grid-template-columns: repeat(2, minmax(0, 1fr));
  gap: 12px;
  margin-top: 12px;
}

@media (max-width: 980px){
  .miniGrid{ grid-template-columns: 1fr; }
}

.miniRow{
  display: grid;
  grid-template-columns: 160px 1fr;
  gap: 10px;
  padding: 8px 0;
  border-bottom: 1px dashed rgba(15,23,42,.10);
  min-width: 0;
}
.miniRow:last-child{ border-bottom: 0; }

.miniKey{
  color: rgba(15,23,42,.70);
  font-weight: 900;
  font-size: 12px;
}

.miniVal{
  color: rgba(15,23,42,.88);
  font-weight: 700;
  font-size: 12px;
  line-height: 1.7;
  overflow-wrap: anywhere;
}

@media (max-width: 520px){
  .miniRow{ grid-template-columns: 1fr; }
}

/* ---------------------------------------------------------
   Chart safety (Recharts)
   --------------------------------------------------------- */

.chartCard,
.chartBox,
.chartWrap,
.recharts-responsive-container,
.recharts-wrapper{
  min-width: 0;
}

.chartWrap{
  min-height: 260px;
  overflow: hidden;
  border-radius: 16px;
  border: 1px solid rgba(15,23,42,.08);
  background: rgba(255,255,255,.55);
  padding: 10px;
}

/* ---------------------------------------------------------
   Methods row + buttons alignment (RTL/LTR)
   --------------------------------------------------------- */

.methodRow{
  display: grid;
  grid-template-columns: 1fr auto;
  gap: 12px;
  align-items: end;
  margin-top: 12px;
  min-width: 0;
}

[dir="rtl"] .methodRow{
  grid-template-columns: auto 1fr;
}

.methodRow .chips{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

.methodRow .chipBtn{
  padding: 10px 14px;
  font-weight: 900;
  border-radius: 999px;
  min-height: 40px;
}

/* ✅ Responsive action group */
.actionsResponsive{
  display: flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
  justify-content: flex-end;
  min-width: 0;
}

[dir="rtl"] .actionsResponsive{
  justify-content: flex-start;
}

@media (max-width: 980px){
  .methodRow{
    grid-template-columns: 1fr;
    align-items: stretch;
  }
  .actionsResponsive{
    justify-content: stretch;
  }
  .actionsResponsive .primaryBtn,
  .actionsResponsive .ghostBtn{
    width: 100%;
  }
}

/* ---------------------------------------------------------
   Info grid (top two boxes)
   --------------------------------------------------------- */

.infoGrid{
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: 14px;
  margin-top: 12px;
  min-width: 0;
}

@media (max-width: 980px){
  .infoGrid{ grid-template-columns: 1fr; }
}

.infoCard{
  padding: 14px;
  border-radius: 18px;
  min-width: 0;
}

.infoCardTitle{
  font-weight: 950;
  color: var(--textHi);
  margin-bottom: 6px;
}

.infoCardBody{
  color: rgba(15,23,42,.74);
  line-height: 1.75;
  overflow-wrap: anywhere;
}

/* ---------------------------------------------------------
   Precheck pills
   --------------------------------------------------------- */

.precheckRow{
  display:flex;
  flex-wrap: wrap;
  gap: 10px;
  align-items: center;
}

/* ---------------------------------------------------------
   Stratification cards — nicer, compact, readable
   --------------------------------------------------------- */

.stratCard{
  padding: 14px;
  border-radius: 18px;
  min-width: 0;
}

.stratHead{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  margin-bottom: 10px;
  min-width:0;
}

.stratHeadTitle{
  font-weight: 950;
  color: var(--textHi);
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.stratHeadMeta{
  font-size:12px;
  color: var(--muted);
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke2);
  background: rgba(15,23,42,.03);
  flex: 0 0 auto;
}

.stratList{
  display:flex;
  flex-direction:column;
  gap: 10px;
}

.stratRow{
  padding: 10px 10px 8px;
  border-radius: 14px;
  border: 1px solid rgba(0,0,0,.06);
  background: rgba(255,255,255,.6);
  min-width:0;
}

.stratTopLine{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap: 10px;
  min-width:0;
}

.stratLabel{
  font-weight: 800;
  color: var(--text);
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.stratRight{
  display:flex;
  align-items:center;
  gap: 8px;
  flex: 0 0 auto;
}

.stratChip{
  font-size: 12px;
  font-weight: 850;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid var(--stroke2);
  background: rgba(37,99,235,.08);
  color: var(--textHi);
}

.stratN{
  font-variant-numeric: tabular-nums;
  font-weight: 850;
  color: var(--muted);
  min-width: 56px;
  text-align: end;
}

.stratBar{
  height: 8px;
  border-radius: 999px;
  margin-top: 8px;
  background: rgba(15,23,42,.06);
  overflow:hidden;
}

.stratFill{
  height:100%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(37,99,235,.60), rgba(56,189,248,.55));
}

[dir="rtl"] .stratN{ text-align: start; }

/* ---------------------------------------------------------
   Report boxes
   --------------------------------------------------------- */

.reportBox2{
  border-radius: 18px;
  padding: 12px;
  background: rgba(255,255,255,.62);
  border: 1px solid rgba(15,23,42,.10);
  min-width: 0;
}

/* Link button inside status card */
.statusCard .linkBtn{
  align-self: flex-start;
}

/* RTL small fix */
[dir="rtl"] .kv{ direction: rtl; }

/* Very small screens */
@media (max-width: 520px){
  .dash .panel,
  .dash .card,
  .dash .statusCard,
  .dash .infoCard{
    border-radius: 16px;
  }
}

/* =========================================================
   Population Breakdown — single professional box
   ========================================================= */

.popBox{
  border-radius: 18px;
  padding: 14px;
  min-width: 0;
}

.popHead{
  display:flex;
  align-items:flex-start;
  justify-content:space-between;
  gap:12px;
  margin-bottom: 10px;
}

.popTitle{
  font-weight: 950;
  color: var(--textHi);
  letter-spacing: .2px;
}

.popSub{
  color: var(--muted);
  font-size: 12px;
  line-height: 1.6;
  margin-top: 4px;
}

.popSeg{
  display:inline-flex;
  gap:6px;
  padding: 6px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(255,255,255,.65);
  backdrop-filter: blur(8px);
  min-width: 0;
  flex-wrap: wrap;
}

.popSegBtn{
  border: 1px solid transparent;
  background: transparent;
  color: rgba(15,23,42,.72);
  font-weight: 900;
  padding: 8px 12px;
  border-radius: 999px;
  cursor: pointer;
  min-height: 38px;
}

.popSegBtn:focus-visible{
  box-shadow: var(--focus);
}

.popSegBtnOn{
  background: rgba(37,99,235,.10);
  border-color: rgba(37,99,235,.22);
  color: var(--textHi);
}

.popGrid{
  display:grid;
  grid-template-columns: 1fr;
  gap: 10px;
  margin-top: 10px;
}

.popRow{
  border-radius: 14px;
  border: 1px solid rgba(15,23,42,.08);
  background: rgba(255,255,255,.62);
  padding: 10px 10px 8px;
  min-width:0;
}

.popTop{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  min-width:0;
}

.popLabel{
  font-weight: 900;
  color: rgba(15,23,42,.88);
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
}

.popMeta{
  display:flex;
  align-items:center;
  gap:8px;
  flex: 0 0 auto;
}

.popPct{
  font-size: 12px;
  font-weight: 950;
  padding: 5px 10px;
  border-radius: 999px;
  border: 1px solid rgba(37,99,235,.18);
  background: rgba(37,99,235,.08);
  color: rgba(15,23,42,.88);
  white-space: nowrap;
}

.popN{
  font-variant-numeric: tabular-nums;
  font-weight: 900;
  color: rgba(15,23,42,.62);
  min-width: 64px;
  text-align: end;
  white-space: nowrap;
}

.popBar{
  height: 8px;
  border-radius: 999px;
  margin-top: 8px;
  background: rgba(15,23,42,.06);
  overflow:hidden;
}

.popFill{
  height:100%;
  border-radius: 999px;
  background: linear-gradient(90deg, rgba(37,99,235,.60), rgba(56,189,248,.55));
}

.popFooter{
  display:flex;
  gap:10px;
  flex-wrap: wrap;
  align-items:center;
  justify-content:space-between;
  margin-top: 10px;
  padding-top: 10px;
  border-top: 1px dashed rgba(15,23,42,.10);
  color: var(--muted);
  font-size: 12px;
}

.popHintPill{
  display:inline-flex;
  align-items:center;
  gap:8px;
  padding: 6px 10px;
  border-radius: 999px;
  border: 1px solid rgba(15,23,42,.10);
  background: rgba(15,23,42,.03);
  color: rgba(15,23,42,.70);
  font-weight: 850;
}

[dir="rtl"] .popN{ text-align: start; }

/* Small screens */
@media (max-width: 520px){
  .popHead{ flex-direction: column; align-items: stretch; }
  .popSeg{ width: 100%; justify-content: space-between; }
  .popSegBtn{ flex: 1 1 auto; text-align: center; }
}
/* ===== PULSE: Responsive action buttons (mobile-first) ===== */
.actionsBlock{
  display:flex;
  flex-direction:column;
  gap:8px;
  align-self:stretch;
  min-width: 260px;
}

.actionsGrid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap:10px;
  align-items:stretch;
}

.actionsGrid .actionBtn{
  width:100%;
  min-height:44px;           /* touch target */
  white-space:nowrap;
}

.actionsHint{
  font-size:12px;
  line-height:1.4;
}

/* Mobile: stack buttons */
@media (max-width: 680px){
  .methodRow{
    display:flex;
    flex-direction:column;
    gap:12px;
    align-items:stretch;
  }

  .actionsBlock{
    min-width:unset;
    width:100%;
  }

  .actionsGrid{
    grid-template-columns: 1fr;
  }

  .actionsGrid .actionBtn{
    justify-content:center;
  }
}
